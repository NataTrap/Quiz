/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./config/config.js":
/*!**************************!*\
  !*** ./config/config.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Сборник конфигурационных настроек\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    host: 'http://localhost:3000/api'\n});\n\n//# sourceURL=webpack://quiz/./config/config.js?");

/***/ }),

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./router.js */ \"./src/router.js\");\n\n\nclass App {\n    constructor() {\n        this.router = new _router_js__WEBPACK_IMPORTED_MODULE_0__.Router()\n        window.addEventListener('DOMContentLoaded', this.handleRouterChanging.bind(this));\n        window.addEventListener('popstate', this.handleRouterChanging.bind(this));\n    }\n\n    handleRouterChanging () {\n        this.router.openRoute()\n    }\n}\n\n(new App());\n\n//# sourceURL=webpack://quiz/./src/app.js?");

/***/ }),

/***/ "./src/components/answers.js":
/*!***********************************!*\
  !*** ./src/components/answers.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Answers: () => (/* binding */ Answers)\n/* harmony export */ });\n/* harmony import */ var _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/url-manager.js */ \"./src/components/utils/url-manager.js\");\n/* harmony import */ var _services_custom_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/custom-http */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config/config */ \"./config/config.js\");\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/auth.js */ \"./src/services/auth.js\");\n\n\n\n\n\nclass Answers {\n    constructor() {\n        this.rightAnswers = [];\n        this.resultAnswers = [];\n        this.quiz = null;\n\n        this.routeParams = _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__.UrlManager.getQueryParams()\n        let testId = this.routeParams.id\n\n\n        this.resultAnswers = JSON.parse(this.routeParams.results);\n        console.log(this.routeParams)\n\n        if (testId) {\n            const xhr = new XMLHttpRequest()\n            xhr.open('GET', 'https://testologia.ru/get-quiz?id=' + testId, false);\n            xhr.send();\n            if (xhr.status === 200 && xhr.responseText) {\n                this.quiz = JSON.parse(xhr.responseText);\n                this.loadRightAnswers(testId)\n                this.showAllQuestion()\n            }\n        }\nthis.init()\n    }\n\n    async init () {\n\n        if (this.routeParams.id) {\n            try {\n                const result = await _services_custom_http__WEBPACK_IMPORTED_MODULE_1__.CustomHttp.request(_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/tests/' + this.routeParams.id )\n                if (result) {\n                    if (result.error) {\n                        throw new Error(result.error);\n                    }\n                    this.quiz = result\n                    this.showAllQuestion()\n                }\n            } catch (error) {\n                console.log(error)\n            }\n\n        }\n    }\n\n    showAllQuestion() {\n        const questions = this.getAllQuestions();\n        const container = document.querySelector('.question-container');\n        questions.forEach((questionItem, questionIndex) => {\n            const questionContainer = document.createElement('div')\n            questionContainer.className = 'test-question'\n            questionContainer.innerHTML = `<div class=\"test-question-title\" id=\"question-title\">\n                    <span>Вопрос ${questionIndex + 1}:</span> ${questionItem.question}\n                </div>`\n            container.appendChild(questionContainer);\n            const answersContainer = this.getAnswers(questionItem.answers, questionIndex)\n            questionContainer.appendChild(answersContainer)\n        })\n    }\n\n   async loadRightAnswer() {\n       const userInfo = _services_auth_js__WEBPACK_IMPORTED_MODULE_3__.Auth.getUserInfo();\n       if (!userInfo) {\n           location.href = '#/'\n       }\n       try {\n           const result = await _services_custom_http__WEBPACK_IMPORTED_MODULE_1__.CustomHttp.request(_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/tests/' + this.routeParams.id + '/result/details?userId=' + userInfo.userId)\n\n           if (result) {\n               if (result.error) {\n                   throw new Error(result.error)\n               }\n           }\n\n       } catch (error) {\n           console.log(error)\n       }\n   }\n\n    getAllQuestions() {\n        return this.quiz.questions;\n    }\n\n    getAnswers(answers, questionIndex) {\n        const answersContainer = document.createElement('div');\n        answersContainer.className = 'test-question-options'\n        answersContainer.id = 'options'\n\n        const rightAnswerId = this.rightAnswers[questionIndex]\n        const userAnswerId = this.resultAnswers[questionIndex]\n\n\n\n        answers.forEach((answer) => {\n            const optionElement = document.createElement('div');\n            optionElement.className = 'test-question-option';\n\n\n            const inputId = 'answer-' + answer.id\n            const inputElement = document.createElement('input');\n            inputElement.className = 'option-answer';\n\n            inputElement.setAttribute('id', inputId);\n            inputElement.setAttribute('type', 'radio');\n            inputElement.setAttribute('value', answer.id);\n            inputElement.setAttribute('disabled', 'disabled');\n\n\n            const labelElement = document.createElement('label');\n            labelElement.setAttribute('for', inputId);\n            labelElement.innerText = answer.answer;\n\n            if (answer.id === rightAnswerId) {\n                optionElement.classList.add('right-answer-color');\n                inputElement.setAttribute('checked', 'checked')\n            }\n\n            if (answer.id === userAnswerId && userAnswerId !== rightAnswerId) {\n                optionElement.classList.add('wrong-answer-color');\n                inputElement.setAttribute('checked', 'checked')\n            }\n\n            optionElement.appendChild(inputElement);\n            optionElement.appendChild(labelElement);\n\n            answersContainer.appendChild(optionElement);\n        });\n\n        return answersContainer;\n    }\n}\n\n\n\n//# sourceURL=webpack://quiz/./src/components/answers.js?");

/***/ }),

/***/ "./src/components/choice.js":
/*!**********************************!*\
  !*** ./src/components/choice.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Choice: () => (/* binding */ Choice)\n/* harmony export */ });\n/* harmony import */ var _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/url-manager.js */ \"./src/components/utils/url-manager.js\");\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n/* harmony import */ var _services_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/auth */ \"./src/services/auth.js\");\n\n\n\n\n\nclass Choice {\n    constructor() {\n        this.quizzes = [];\n        this.testResult = null;\n        this.routeParams = _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__.UrlManager.getQueryParams()\n\n\n        this.init()\n    }\n\n\n    async init() {\n        try {\n            const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__.CustomHttp.request(_config_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/tests')\n            if (result) {\n                if (result.error) {\n                    throw new Error(result.error);\n                }\n                this.quizzes = result;\n\n            }\n        } catch (error) {\n            return console.log(error)\n        }\n\n        const userInfo = _services_auth__WEBPACK_IMPORTED_MODULE_3__.Auth.getUserInfo()\n        if (userInfo) {\n            try {\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__.CustomHttp.request(_config_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/tests/results?userId=' + userInfo.userId)\n                if (result) {\n                    if (result.error) {\n                        throw new Error(result.error);\n                    }\n                    this.testResult = result;\n                }\n            } catch (error) {\n                return console.log(error)\n            }\n\n        }\n        this.processQuizzies();\n    }\n\n\n    processQuizzies() {\n        const choiceOptionsElement = document.getElementById('choice-options');\n        if (this.quizzes && this.quizzes.length > 0) {\n            this.quizzes.forEach(quiz => {\n                const that = this;\n                const choiceOptionElement = document.createElement('div');\n                choiceOptionElement.className = 'choice-option';\n                choiceOptionElement.setAttribute('data-id', quiz.id)\n                choiceOptionElement.onclick = function () {\n                    that.chooseQuiz(this)\n                }\n\n                const choiceOptionTextElement = document.createElement('div');\n                choiceOptionTextElement.className = 'choice-option-text';\n                choiceOptionTextElement.innerText = quiz.name;\n\n                const choiceOptionArrowElement = document.createElement('div');\n                choiceOptionArrowElement.className = 'choice-option-arrow';\n\n                const result = this.testResult.find(item => item.testId === quiz.id);\n                if (result) {\n                    const choiceOptionResultElement = document.createElement('div');\n                    choiceOptionResultElement.className = 'choice-option-result';\n                    choiceOptionResultElement.innerHTML = '<div>Результат</div><div>' + result.score + '/' + result.total + '</div>';\n                    choiceOptionElement.appendChild(choiceOptionResultElement)\n                }\n\n                const choiceOptionImageElement = document.createElement('img');\n                choiceOptionImageElement.setAttribute('src', '/images/arrow.png');\n                choiceOptionImageElement.setAttribute('alt', 'Стрелка')\n\n                choiceOptionArrowElement.appendChild(choiceOptionImageElement);\n                choiceOptionElement.appendChild(choiceOptionTextElement)\n                choiceOptionElement.appendChild(choiceOptionArrowElement)\n\n                choiceOptionsElement.appendChild(choiceOptionElement)\n            });\n        }\n    }\n\n    chooseQuiz(element) {\n        const dataId = element.getAttribute('data-id');\n        if (dataId) {\n            location.href = '#/test?id=' + dataId;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://quiz/./src/components/choice.js?");

/***/ }),

/***/ "./src/components/form.js":
/*!********************************!*\
  !*** ./src/components/form.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Form: () => (/* binding */ Form)\n/* harmony export */ });\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/auth.js */ \"./src/services/auth.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n\n\n\n\nclass Form {\n    constructor(page) {\n        this.agreeElement = null;\n        this.processElement = null;\n        this.page = page\n\n\n        const accessToken = localStorage.getItem(_services_auth_js__WEBPACK_IMPORTED_MODULE_1__.Auth.accessTokenKey);\n        if (accessToken) {\n            location.href = '#/choice'\n            return\n        }\n\n\n        this.fields = [\n\n\n            {\n                name: 'email',\n                id: 'email',\n                element: null,\n                regex: /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/,\n                valid: false,\n            },\n            {\n                name: 'password',\n                id: 'password',\n                element: null,\n                regex: /(?=.*\\d)(?=.*[\\W_])(?=.*[A-Z]).{8}/,\n                valid: false,\n            }\n        ];\n\n        if (this.page === 'signup') {\n\n            this.fields.unshift({\n                    name: 'name',\n                    id: 'name',\n                    element: null,\n                    regex: /^[A-Z][a-z]+\\s*$/,\n                    valid: false,\n                },\n                {\n                    name: 'lastName',\n                    id: 'last-name',\n                    element: null,\n                    regex: /^[A-Z][a-z]+\\s*$/,\n                    valid: false,\n                }\n            )\n        }\n\n\n        const that = this;\n        this.fields.forEach(item => {\n            item.element = document.getElementById(item.id);\n            item.element.onchange = function () {\n                that.validateField.call(that, item, this);\n            }\n        });\n\n        this.processElement = document.getElementById('process');\n        this.processElement.onclick = function () {\n            that.processForm();\n        }\n\n        if (this.page === 'signup') {\n            this.agreeElement = document.getElementById('agree');\n            this.agreeElement.onchange = function () {\n                that.validateForm()\n            }\n        }\n    }\n\n    validateField(field, element) {\n        if (!element.value || !element.value.match(field.regex)) {\n            element.parentNode.style.borderColor = 'red';\n            field.valid = false;\n        } else {\n            element.parentNode.removeAttribute('style');\n            field.valid = true;\n        }\n        this.validateForm();\n    }\n\n    validateForm() {\n        const validForm = this.fields.every(item => item.valid)\n        const isValid = this.agreeElement ? this.agreeElement.checked && validForm : validForm;\n        if (isValid) {\n\n            this.processElement.removeAttribute('disabled');\n        } else {\n            this.processElement.setAttribute('disabled', 'disabled');\n        }\n        return isValid;\n    }\n\n\n// Эта функция проверяет валидность и открывает доступ к следующей странице\n    async processForm() {\n        if (this.validateForm()) {\n            const email = this.fields.find(item => item.name === 'email').element.value\n            const password = this.fields.find(item => item.name === 'password').element.value\n\n            // Исходя из того, какая сейчас страница делаем соответствующий запрос на backend\n            if (this.page === 'signup') {\n                try {\n                    // Отправляем запрос на регистрацию\n                    const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.request(_config_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/signup', 'POST', {\n                        name: this.fields.find(item => item.name === 'name').element.value,\n                        lastName: this.fields.find(item => item.name === 'lastName').element.value,\n                        email: email,\n                        password: password,\n                    })\n                    // Обработка результата ответа\n                    if (result) {\n                        if (result.error || !result.user) {\n                            throw new Error(result.message);\n                        }\n                    }\n                } catch (error) {\n                    return console.log(error)\n                }\n            }\n\n\n            try {\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.request(_config_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/login', 'POST', {\n                    email: email,\n                    password: password,\n                })\n\n                if (result) {\n                    if (result.error || !result.accessToken || !result.refreshToken || !result.fullName || !result.userId) {\n                        throw new Error(result.message);\n                    }\n\n                    _services_auth_js__WEBPACK_IMPORTED_MODULE_1__.Auth.setTokens(result.accessToken, result.refreshToken)\n                    _services_auth_js__WEBPACK_IMPORTED_MODULE_1__.Auth.setUserInfo({\n                        fullName: result.fullName,\n                        userId: result.userId,\n                        email: result.email\n                    })\n                    location.href = '#/choice'\n                }\n            } catch (error) {\n                console.log(error)\n            }\n        }\n    }\n\n\n}\n\n// let paramString = '';\n// this.fields.forEach(item => {\n//     paramString += (!paramString ? '?' : '&') + item.name + '=' + item.element.value;\n// })\n// location.href = '#/choice' + paramString;\n\n\n//# sourceURL=webpack://quiz/./src/components/form.js?");

/***/ }),

/***/ "./src/components/result.js":
/*!**********************************!*\
  !*** ./src/components/result.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Result: () => (/* binding */ Result)\n/* harmony export */ });\n/* harmony import */ var _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/url-manager.js */ \"./src/components/utils/url-manager.js\");\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/auth.js */ \"./src/services/auth.js\");\n\n\n\n\n\nclass Result {\n    constructor() {\n        // this.resultButtonElement = null;\n        this.routeParams = _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__.UrlManager.getQueryParams()\n        this.init()\n\n\n        const that = this;\n        document.getElementById('results').onclick = function () {\n            that.allAnswers(this);\n        }\n\n        // this.resultButtonElement = document.querySelector('#results');\n        // this.resultButtonElement.onclick = this.moveToAnswers.bind(this);\n        // this.moveToAnswers()\n    }\n\n    async init() {\n        const userInfo = _services_auth_js__WEBPACK_IMPORTED_MODULE_3__.Auth.getUserInfo();\n        if (!userInfo) {\n            location.href = '#/';\n        }\n\n        if (this.routeParams.id) {\n            try {\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__.CustomHttp.request(_config_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/tests/' + this.routeParams.id + '/result?userId=' + userInfo.userId);\n\n                if (result) {\n                    if (result.error) {\n                        throw new Error(result.error);\n                    }\n                    document.getElementById('result-score').innerText = result.score + '/' + result.total;\n                    return;\n                }\n            } catch (error) {\n                console.log(error)\n            }\n        }\n        location.href = '#/';\n    }\n\n   // moveToAnswers() {\n        // const searchStr = new URLSearchParams({\n        //     id: this.routeParams.id,\n        //     // results: this.routeParams.results\n        // }).toString();\n        // console.log(searchStr)\n        // location.href  = '#/answer?id=' + this.routeParams.id;\n    // }\n    allAnswers() {\n        location.href = '#/answer?id=' + this.routeParams.id;\n    }\n}\n\n\n//# sourceURL=webpack://quiz/./src/components/result.js?");

/***/ }),

/***/ "./src/components/test.js":
/*!********************************!*\
  !*** ./src/components/test.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Test: () => (/* binding */ Test)\n/* harmony export */ });\n/* harmony import */ var _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/url-manager.js */ \"./src/components/utils/url-manager.js\");\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/auth.js */ \"./src/services/auth.js\");\n\n\n\n\n\nclass Test  {\n    constructor() {\n        this.progressBarElement = null;\n        this.passButtonElement = null;\n        this.questionTiTleElement = null;\n        this.nextButtonElement = null;\n        this.prevButtonElement = null;\n        this.optionsElement = null;\n        this.quiz = null;\n        this.currentQuestionIndex = 1;\n        this.userResult = [];\n        this.routeParams = _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__.UrlManager.getQueryParams()\n        this.init()\n    }\n\n    async init() {\n        if (this.routeParams.id) {\n            try {\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__.CustomHttp.request(_config_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/tests/' + this.routeParams.id)\n                if (result) {\n                    if (result.error) {\n                        throw new Error(result.error);\n                    }\n                    this.quiz = result\n                    this.startQuiz()\n                }\n            } catch (error) {\n                console.log(error)\n            }\n        }\n\n    }\n\n\n        startQuiz() {\n            console.log(this.quiz)\n            this.progressBarElement = document.getElementById('progress-bar');\n            this.questionTiTleElement = document.getElementById('title');\n            this.optionsElement = document.getElementById('options');\n            this.nextButtonElement = document.getElementById('next');\n            this.nextButtonElement.onclick = this.move.bind(this, 'next')\n            this.passButtonElement = document.getElementById('pass');\n            this.passButtonElement.onclick = this.move.bind(this, 'pass');\n            document.getElementById('pre-title').innerText = this.quiz.name;\n\n            this.prevButtonElement = document.getElementById('prev');\n            this.prevButtonElement.onclick = this.move.bind(this, 'prev');\n\n\n            this.prepareProgressBar();\n            this.showQuestion();\n\n            const timerElement = document.getElementById('timer')\n            let seconds = 59;\n            this.interval = setInterval(function () {\n                seconds--;\n                timerElement.innerText = seconds;\n                if (seconds === 0) {\n                    clearInterval(this.interval)\n\n                    this.complete()\n                }\n            }.bind(this), 1000);\n        }\n\n        prepareProgressBar() {\n            for (let i = 0; i < this.quiz.questions.length; i++) {\n                const itemElement = document.createElement('div');\n                itemElement.className = 'test-progress-bar-item';\n                if (i === 0) {\n                    itemElement.classList.add('active')\n                }\n\n                const itemCircleElement = document.createElement('div');\n                itemCircleElement.className = 'test-progress-bar-item-circle';\n\n                const itemTextElement = document.createElement('div');\n                itemTextElement.className = 'test-progress-bar-item-text';\n                itemTextElement.innerText = 'Вопрос ' + (i + 1);\n\n                itemElement.appendChild(itemCircleElement);\n                itemElement.appendChild(itemTextElement);\n                this.progressBarElement.appendChild(itemElement);\n            }\n        }\n\n        showQuestion() {\n            const activeQuestion = this.quiz.questions[this.currentQuestionIndex - 1];\n            this.questionTiTleElement.innerHTML = '<span>Вопрос ' + this.currentQuestionIndex + ':</span> ' + activeQuestion.question;\n\n            this.optionsElement.innerHTML = '';\n            const that = this\n            const chosenOption = this.userResult.find(item => item.questionId === activeQuestion.id);\n            activeQuestion.answers.forEach(answer => {\n                const optionElement = document.createElement('div');\n                optionElement.className = 'test-question-option';\n\n                const inputId = 'answer-' + answer.id\n                const inputElement = document.createElement('input');\n                inputElement.className = 'option-answer';\n                inputElement.setAttribute('id', inputId);\n                inputElement.setAttribute('type', 'radio');\n                inputElement.setAttribute('name', 'answer');\n                inputElement.setAttribute('value', answer.id);\n\n                if (chosenOption && chosenOption.chosenAnswerId === answer.id) {\n                    inputElement.setAttribute('checked', 'checked')\n                }\n\n                inputElement.onchange = function () {\n                    that.chooseAnswer()\n                }\n\n                const labelElement = document.createElement('label');\n                labelElement.setAttribute('for', inputId);\n                labelElement.innerText = answer.answer;\n\n                optionElement.appendChild(inputElement);\n                optionElement.appendChild(labelElement);\n\n                this.optionsElement.appendChild(optionElement);\n            });\n\n            if (chosenOption && chosenOption.chosenAnswerId) {\n                this.nextButtonElement.removeAttribute('disabled');\n            } else {\n                this.nextButtonElement.setAttribute('disabled', 'disabled');\n            }\n            if (this.currentQuestionIndex === this.quiz.questions.length) {\n                this.nextButtonElement.innerText = 'Завершить'\n            } else {\n                this.nextButtonElement.innerText = 'Далее'\n            }\n\n\n            if (this.currentQuestionIndex > 1) {\n                this.prevButtonElement.removeAttribute('disabled');\n            } else {\n                this.prevButtonElement.setAttribute('disabled', 'disabled');\n            }\n\n\n        }\n\n\n        chooseAnswer() {\n            this.nextButtonElement.removeAttribute('disabled');\n        }\n\n\n        move(action) {\n            const activeQuestion = this.quiz.questions[this.currentQuestionIndex - 1];\n            const chosenAnswer = Array.from(document.getElementsByClassName('option-answer')).find(element => {\n                return element.checked;\n            });\n\n            let chosenAnswerId = null;\n            if (chosenAnswer && chosenAnswer.value) {\n                chosenAnswerId = Number(chosenAnswer.value);\n            }\n\n            const existingResult = this.userResult.find(item => {\n                return item.questionId === activeQuestion.id\n            });\n\n            if (existingResult) {\n                existingResult.chosenAnswerId = chosenAnswerId;\n            } else {\n                this.userResult.push({\n                    questionId: activeQuestion.id,\n                    chosenAnswerId: chosenAnswerId,\n                })\n            }\n\n            console.log(this.userResult)\n\n\n            if (action === 'next' || action === 'pass') {\n                this.currentQuestionIndex++;\n            } else {\n                this.currentQuestionIndex--;\n            }\n\n            if (this.currentQuestionIndex >  this.quiz.questions.length) {\n                clearInterval(this.interval)\n                this.complete()\n                return;\n            }\n\n\n\n            Array.from(this.progressBarElement.children).forEach((item, index) => {\n                const currentItemIndex = index + 1\n                item.classList.remove('complete')\n                item.classList.remove('active')\n\n                if (currentItemIndex === this.currentQuestionIndex) {\n                    item.classList.add('active')\n                } else if (currentItemIndex < this.currentQuestionIndex) {\n                    item.classList.add('complete')\n                }\n            })\n\n\n            this.showQuestion();\n        }\n\n        async complete() {\n            const userInfo = _services_auth_js__WEBPACK_IMPORTED_MODULE_3__.Auth.getUserInfo();\n            if (!userInfo) {\n                location.href = '#/'\n            }\n            try {\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_1__.CustomHttp.request(_config_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + '/tests/' + this.routeParams.id + '/pass', 'POST', {\n                    userId: userInfo.userId,\n                    results: this.userResult\n                })\n\n                if (result) {\n                    if (result.error) {\n                        throw new Error(result.error)\n                    }\n                    location.href = '#/result?id=' + this.routeParams.id\n                }\n\n            } catch (error) {\n                console.log(error)\n            }\n        }\n}\n\n//# sourceURL=webpack://quiz/./src/components/test.js?");

/***/ }),

/***/ "./src/components/utils/url-manager.js":
/*!*********************************************!*\
  !*** ./src/components/utils/url-manager.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UrlManager: () => (/* binding */ UrlManager)\n/* harmony export */ });\nclass UrlManager {\n    static getQueryParams () {\n        const qs = document.location.hash.split('+').join(' ');\n\n        let params = {},\n            tokens,\n            re = /[?&]([^=]+)=([^&]*)/g;\n\n        while (tokens = re.exec(qs)) {\n            params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n        }\n        return params\n    }\n}\n\n\n\n\n//# sourceURL=webpack://quiz/./src/components/utils/url-manager.js?");

/***/ }),

/***/ "./src/router.js":
/*!***********************!*\
  !*** ./src/router.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Router: () => (/* binding */ Router)\n/* harmony export */ });\n/* harmony import */ var _components_form_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/form.js */ \"./src/components/form.js\");\n/* harmony import */ var _components_choice_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/choice.js */ \"./src/components/choice.js\");\n/* harmony import */ var _components_test_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/test.js */ \"./src/components/test.js\");\n/* harmony import */ var _components_result_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/result.js */ \"./src/components/result.js\");\n/* harmony import */ var _components_answers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/answers.js */ \"./src/components/answers.js\");\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/auth.js */ \"./src/services/auth.js\");\n\n\n\n\n\n\n\nclass Router {\n\n    constructor() {\n        this.contentElement = document.getElementById('content');\n        this.stylesElement = document.getElementById('styles');\n        this.titelElement =  document.getElementById('page-title');\n        this.profileElement =  document.getElementById('profile');\n        this.profileFullNameElement =  document.getElementById('profile-full-name');\n\n        this.routes = [\n            {\n                route: '#/',\n                title: 'Главная',\n                template: 'templates/index.html',\n                styles: 'styles/index.css',\n                load: () => {\n                }\n            },\n            {\n                route: '#/signup',\n                title: 'Регистрация',\n                template: 'templates/signup.html',\n                styles: 'styles/form.css',\n                load: () => {\n                    new _components_form_js__WEBPACK_IMPORTED_MODULE_0__.Form('signup')\n                }\n            },\n            {\n                route: '#/login',\n                title: 'Вход в систему',\n                template: 'templates/login.html',\n                styles: 'styles/form.css',\n                load: () => {\n                    new _components_form_js__WEBPACK_IMPORTED_MODULE_0__.Form('login')\n                }\n            },\n            {\n                route: '#/choice',\n                title: 'Выбор теста',\n                template: 'templates/choice.html',\n                styles: 'styles/choice.css',\n                load: () => {\n                    new _components_choice_js__WEBPACK_IMPORTED_MODULE_1__.Choice()\n                }\n            },\n            {\n                route: '#/test',\n                title: 'Прохождение теста',\n                template: 'templates/test.html',\n                styles: 'styles/test.css',\n                load: () => {\n                    new _components_test_js__WEBPACK_IMPORTED_MODULE_2__.Test()\n                }\n            },\n            {\n                route: '#/result',\n                title: 'Результат теста',\n                template: 'templates/result.html',\n                styles: 'styles/result.css',\n                load: () => {\n                    new _components_result_js__WEBPACK_IMPORTED_MODULE_3__.Result()\n                }\n            },\n            {\n                route: '#/answers',\n                title: 'Правильные ответы к тесту',\n                template: 'templates/answers.html',\n                styles: 'styles/answers.css',\n                load: () => {\n                    new _components_answers_js__WEBPACK_IMPORTED_MODULE_4__.Answers()\n                }\n            },\n        ]\n    }\n\n    async openRoute() {\n        const urlRoute =  window.location.hash.split('?')[0];\n        if (urlRoute === '#/logout') {\n           _services_auth_js__WEBPACK_IMPORTED_MODULE_5__.Auth.logout()\n            window.location.href = '#/';\n            return;\n        }\n\n\n        const newRoute = this.routes.find(item => {\n            return item.route === urlRoute;\n        });\n        if (!newRoute) {\n            window.location.href = '#/';\n            return;\n        }\n\n        this.contentElement.innerHTML =\n            await fetch(newRoute.template).then(response => response.text());\n        this.stylesElement.setAttribute('href', newRoute.styles);\n        this.titelElement.innerText = newRoute.title\n\n\n        const userInfo = _services_auth_js__WEBPACK_IMPORTED_MODULE_5__.Auth.getUserInfo();\n        const accessToken = localStorage.getItem(_services_auth_js__WEBPACK_IMPORTED_MODULE_5__.Auth.accessTokenKey);\n        if (userInfo && accessToken) {\n            this.profileElement.style.display = 'flex';\n            this.profileFullNameElement.innerText = userInfo.fullName\n        } else {\n            this.profileElement.style.display = 'none';\n        }\n        newRoute.load()\n    }\n\n\n}\n\n//# sourceURL=webpack://quiz/./src/router.js?");

/***/ }),

/***/ "./src/services/auth.js":
/*!******************************!*\
  !*** ./src/services/auth.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth: () => (/* binding */ Auth)\n/* harmony export */ });\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n\n\n// работает с авторизацией\n\n\nclass Auth {\n    static accessTokenKey = 'accessToken';\n    static refreshTokenKey = 'refreshToken';\n    static userInfoKey = 'userInfo';\n\n    // Обработать неавторизованный ответ\n    static async processUnauthorizedResponse() {\n        const refreshToken = localStorage.getItem(this.refreshTokenKey); // Получаем refresh токен\n        if (refreshToken) { // Если токен существует, То мы будем делать запрос на обновление токена\n            const response = await fetch(_config_config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].host + 'refresh', {\n                method: 'POST',\n                headers: {\n                    'Content-type': 'application/json',\n                    'Accept': 'application/json',\n                },\n                body: JSON.stringify({ refreshToken: refreshToken})\n            });\n\n            if (response && response.status === 200) {\n                // Берём json в ответе, так как нам надо обновить пару токенов получить её, и изменить эти данные в Local storage.\n                const result = await response.json();\n\n                if (result && !response.error) {\n                    this.setTokens(result.accessToken, result.refreshToken);\n                    return true // Если токены обновились возвращаем true\n                }\n            }\n        }\n        this.removeTokens();\n        location.href = '#/'\n        return false;\n    }\n\n    static async logout () {\n\n        const refreshToken = localStorage.getItem(this.refreshTokenKey);\n        if (refreshToken) {\n            const response = await fetch(_config_config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].host + '/logout', {\n                method: 'POST',\n                headers: {\n                    'Content-type': 'application/json',\n                    'Accept': 'application/json',\n                },\n                body: JSON.stringify({refreshToken: refreshToken})\n            });\n\n            if (response && response.status === 200) {\n                const result = await response.json();\n                if (result && !response.error) {\n                    Auth.removeTokens();\n                    localStorage.removeItem(Auth.userInfoKey);\n                    return true\n                }\n            }\n        }\n\n\n    }\n\n    static setTokens(accessToken, refreshToken) {\n        localStorage.setItem(this.accessTokenKey, accessToken)\n        localStorage.setItem(this.refreshTokenKey, refreshToken)\n    }\n\n    static removeTokens() {\n        localStorage.removeItem(this.accessTokenKey)\n        localStorage.removeItem(this.refreshTokenKey)\n    }\n\n    static setUserInfo(info) {\n        localStorage.setItem(this.userInfoKey, JSON.stringify(info))\n    }\n\n    static getUserInfo () {\n        const userInfo = localStorage.getItem(this.userInfoKey);\n        if (userInfo) {\n            return JSON.parse(userInfo)\n        }\n\n        return null\n    }\n\n}\n\n//# sourceURL=webpack://quiz/./src/services/auth.js?");

/***/ }),

/***/ "./src/services/custom-http.js":
/*!*************************************!*\
  !*** ./src/services/custom-http.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomHttp: () => (/* binding */ CustomHttp)\n/* harmony export */ });\n/* harmony import */ var _auth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth.js */ \"./src/services/auth.js\");\n\nclass CustomHttp {\n\n    static async request(url, method = 'GET', body = null) {\n        // Для GET запросов\n        const params = {\n            method: method,\n            headers: {\n                'Content-type': 'application/json',\n                'Accept': 'application/json',\n            },\n        };\n\n        let token = localStorage.getItem(_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.accessTokenKey)\n\n        // Если токен у нас есть, То мы будем его добавлять в каждый запрос к заголовку\n        if (token) {\n            params.headers['x-access-token'] = token;\n        }\n\n\n        if (body) {\n            params.body = JSON.stringify(body)\n        }\n\n\n        const response = await fetch(url, params);\n\n\n            // Проверяем на код ответа\n        if (response.status < 200 || response.status >= 300) {\n            if (response.status === 401) {\n            // Мы запрашиваем refresh токен\n                const result = await _auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.processUnauthorizedResponse(); // Если из этой функции вернулась true И наш токен готов к использованию\n                if (result) {\n                    return await this.request(url, method, body);\n                } else {\n                    return null\n                }\n            }\n            throw new Error(response.message)\n        }\n// Возвращаем ответ response.json, Если запрос прошёл успешно\n        return await response.json();\n    }\n}\n\n\n//# sourceURL=webpack://quiz/./src/services/custom-http.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.js");
/******/ 	
/******/ })()
;